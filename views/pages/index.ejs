<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../components/head.ejs', {title: title}) %>
    <link href="/stylesheets/index.css" rel="stylesheet">
    <script>
      console.log('<%- path%>' === '')
      console.log('<%- path%>')
      async function login() {
        // MARK: axios를 통한 post요청 처리; 입력한 값을 세션에 user_id로 저장함
        await axios.post( '/main', {
          id: document.getElementById('id').value,
        })
        if('<%- path%>' === '') {
          location.href = '/main'
        }
        else { // path paramater가 존재하는 경우 해당 content로 즉시 이동
          location.href = `/content/<%- path%>?shared=true`
        }

      }
    </script>
  </head>
  <body>
  <main class="d-flex flex-column">
    <div class="index-box">
      <img src="/images/logo.png" alt="소소식탁" class="index-img">
    </div>
    <div class="input-group mb-3">
      <input id="id" type="text" class="form-control" placeholder="닉네임 입력" autocomplete="off">
      <input type="button" class="btn btn-outline-secondary" onclick="login()" value="입력"/>
    </div>
  </main>
  <%- include('../components/footer.ejs') %>
  </body>

</html>



<!--response = ip주소

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
async function getIpClient() {
  try {
    const response = await axios.get('https://api.ipify.org?format=json');
    console.log("ip" + response);
  } catch (error) {
    console.error(error);
  }
}

getIpClient();
</script>-->